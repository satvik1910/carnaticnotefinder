2025-08-05 12:01:00,728 - app - ERROR - Error in OAuth callback: OpenIDMixin.parse_id_token() missing 1 required positional argument: 'nonce'
Traceback (most recent call last):
  File "C:\Users\shrav\CascadeProjects\RagaNoteFinder\app\auth\oauth.py", line 72, in handle_google_authorized
    userinfo = oauth.google.parse_id_token(token)
TypeError: OpenIDMixin.parse_id_token() missing 1 required positional argument: 'nonce'
2025-08-05 12:13:35,045 - app - INFO - RagaNoteFinder startup
2025-08-05 12:13:35,047 - app - INFO - Logging level: DEBUG
2025-08-05 12:13:35,047 - app - INFO - Application root: C:\Users\shrav\CascadeProjects\RagaNoteFinder
2025-08-05 12:13:37,027 - app - DEBUG - Initializing OAuth with client ID: 395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com
2025-08-05 12:13:37,028 - app - DEBUG - Using redirect URIs: ['http://localhost:5002/auth/login/google/authorized', 'http://127.0.0.1:5002/auth/login/google/authorized', 'http://localhost:5002/authorized', 'http://127.0.0.1:5002/authorized']
2025-08-05 12:14:13,341 - app - DEBUG - Generated auth URL: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=enEq2YwdbEhYwNdIfpNYHcVSpMsLmk&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=XW3Uq5gn3ZolXIu9kNFr
2025-08-05 12:14:13,342 - app - DEBUG - Redirecting to Google OAuth: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=enEq2YwdbEhYwNdIfpNYHcVSpMsLmk&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=XW3Uq5gn3ZolXIu9kNFr
2025-08-05 12:14:18,162 - app - DEBUG - OAuth callback received. Args: ImmutableMultiDict([('state', 'enEq2YwdbEhYwNdIfpNYHcVSpMsLmk'), ('code', '4/0AVMBsJiW5NSjIIkTxwGCL7b1ghSmrKlBcxNmbPSnFxtORi4WOMTP7Jpaecgqq0mJKxyQWQ'), ('scope', 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid'), ('authuser', '0'), ('prompt', 'consent')])
2025-08-05 12:14:18,162 - app - DEBUG - OAuth callback received. Args: {'scope': 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid', 'authuser': '0', 'prompt': 'consent'}
2025-08-05 12:14:18,163 - app - DEBUG - Attempting to get access token...
2025-08-05 12:14:18,460 - app - DEBUG - OAuth token received. Token keys: ['access_token', 'expires_in', 'refresh_token', 'scope', 'token_type', 'id_token', 'expires_at', 'userinfo']
2025-08-05 12:14:18,460 - app - DEBUG - Attempting to fetch user info...
2025-08-05 12:14:18,460 - app - ERROR - Error processing user info: OpenIDMixin.parse_id_token() missing 1 required positional argument: 'nonce'
Traceback (most recent call last):
  File "C:\Users\shrav\CascadeProjects\RagaNoteFinder\app\auth\oauth.py", line 81, in handle_google_authorized
    userinfo = oauth.google.parse_id_token(token)
TypeError: OpenIDMixin.parse_id_token() missing 1 required positional argument: 'nonce'
2025-08-05 12:16:39,679 - app - INFO - RagaNoteFinder startup
2025-08-05 12:16:39,690 - app - INFO - Logging level: DEBUG
2025-08-05 12:16:39,690 - app - INFO - Application root: C:\Users\shrav\CascadeProjects\RagaNoteFinder
2025-08-05 12:16:41,373 - app - DEBUG - Initializing OAuth with client ID: 395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com
2025-08-05 12:16:41,374 - app - DEBUG - Using redirect URIs: ['http://localhost:5002/auth/login/google/authorized', 'http://127.0.0.1:5002/auth/login/google/authorized', 'http://localhost:5002/authorized', 'http://127.0.0.1:5002/authorized']
2025-08-05 12:16:52,586 - app - DEBUG - Generated auth URL: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=4Jf3bZVllEC4oxEiCNqbqxsT31mvXc&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=KdZh3Z1mVUTbL9Xw1U9Z
2025-08-05 12:16:52,587 - app - DEBUG - Redirecting to Google OAuth: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=4Jf3bZVllEC4oxEiCNqbqxsT31mvXc&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=KdZh3Z1mVUTbL9Xw1U9Z
2025-08-05 12:16:57,559 - app - DEBUG - OAuth callback received. Args: ImmutableMultiDict([('state', '4Jf3bZVllEC4oxEiCNqbqxsT31mvXc'), ('code', '4/0AVMBsJjTaAuyEztnOe-d0WjmfTYYMa35hG265kcTqOYoPow9-QXL77bFJ007YCnnleR34g'), ('scope', 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid'), ('authuser', '0'), ('prompt', 'consent')])
2025-08-05 12:16:57,559 - app - DEBUG - OAuth callback received. Args: {'scope': 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid', 'authuser': '0', 'prompt': 'consent'}
2025-08-05 12:16:57,559 - app - DEBUG - Attempting to get access token...
2025-08-05 12:16:57,863 - app - DEBUG - OAuth token received. Token keys: ['access_token', 'expires_in', 'refresh_token', 'scope', 'token_type', 'id_token', 'expires_at', 'userinfo']
2025-08-05 12:16:57,866 - app - DEBUG - Attempting to fetch user info...
2025-08-05 12:16:57,966 - app - DEBUG - Fetched user info from userinfo endpoint: {'sub': '111559905826413763403', 'name': 'satvan S', 'given_name': 'satvan', 'family_name': 'S', 'picture': 'https://lh3.googleusercontent.com/a/ACg8ocJHZ_DvVHsu-zDKf_Kku2mgk7npg6MXfMVRyAzpvV-X5AfK=s96-c', 'email': 'satvan19th@gmail.com', 'email_verified': True}
2025-08-05 12:16:57,974 - app - DEBUG - User info from Google: {'name': 'satvan S', 'given_name': 'satvan', 'family_name': 'S', 'picture': 'https://lh3.googleusercontent.com/a/ACg8ocJHZ_DvVHsu-zDKf_Kku2mgk7npg6MXfMVRyAzpvV-X5AfK=s96-c', 'email': 'satvan19th@gmail.com', 'email_verified': True}
2025-08-05 12:16:57,975 - app - DEBUG - Successfully processed user data for satvan19th@gmail.com
2025-08-05 12:18:50,283 - app - DEBUG - Generated auth URL: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=vy6LIg91LBtnYDZWCqZMpBSdMAf4WJ&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=YspsrmPJoEoYuz1Lqybk
2025-08-05 12:18:50,283 - app - DEBUG - Redirecting to Google OAuth: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=vy6LIg91LBtnYDZWCqZMpBSdMAf4WJ&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=YspsrmPJoEoYuz1Lqybk
2025-08-05 12:18:55,093 - app - DEBUG - OAuth callback received. Args: ImmutableMultiDict([('state', 'vy6LIg91LBtnYDZWCqZMpBSdMAf4WJ'), ('code', '4/0AVMBsJiL06tw31heW_3Nw_Rklb-7AEbyvSxgvoc-RuAqcdu1hXG6BIqpKglSk2Enpy_Blw'), ('scope', 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid'), ('authuser', '0'), ('prompt', 'consent')])
2025-08-05 12:18:55,094 - app - DEBUG - OAuth callback received. Args: {'scope': 'email profile https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email openid', 'authuser': '0', 'prompt': 'consent'}
2025-08-05 12:18:55,094 - app - DEBUG - Attempting to get access token...
2025-08-05 12:18:55,297 - app - DEBUG - OAuth token received. Token keys: ['access_token', 'expires_in', 'refresh_token', 'scope', 'token_type', 'id_token', 'expires_at', 'userinfo']
2025-08-05 12:18:55,298 - app - DEBUG - Attempting to fetch user info...
2025-08-05 12:18:55,395 - app - DEBUG - Fetched user info from userinfo endpoint: {'sub': '111559905826413763403', 'name': 'satvan S', 'given_name': 'satvan', 'family_name': 'S', 'picture': 'https://lh3.googleusercontent.com/a/ACg8ocJHZ_DvVHsu-zDKf_Kku2mgk7npg6MXfMVRyAzpvV-X5AfK=s96-c', 'email': 'satvan19th@gmail.com', 'email_verified': True}
2025-08-05 12:18:55,398 - app - DEBUG - User info from Google: {'name': 'satvan S', 'given_name': 'satvan', 'family_name': 'S', 'picture': 'https://lh3.googleusercontent.com/a/ACg8ocJHZ_DvVHsu-zDKf_Kku2mgk7npg6MXfMVRyAzpvV-X5AfK=s96-c', 'email': 'satvan19th@gmail.com', 'email_verified': True}
2025-08-05 12:18:55,399 - app - DEBUG - Successfully processed user data for satvan19th@gmail.com
2025-08-05 12:19:09,942 - app - DEBUG - Generated auth URL: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=7GCUFlnYxynyslTYJTCRWlbxDWgPG0&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=TwFbUIzHafQIvtLktHA3
2025-08-05 12:19:09,943 - app - DEBUG - Redirecting to Google OAuth: https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=395707312620-i6nq9lirn82gv31hjqt1fi3qqq3nsrf4.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A5002%2Fauth%2Flogin%2Fgoogle%2Fauthorized&scope=openid+email+profile&state=7GCUFlnYxynyslTYJTCRWlbxDWgPG0&access_type=offline&prompt=consent&include_granted_scopes=true&nonce=TwFbUIzHafQIvtLktHA3
